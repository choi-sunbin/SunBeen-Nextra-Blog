# 12. ğŸŸ¦ TypeScript - ì˜µì…”ë„(Optional) & ì œë„¤ë¦­(Generic) ì •ë¦¬

## ğŸ“Œ 1. ì˜µì…”ë„(Optional)

### âœ… ì‚¬ìš© ë°©ë²•

- ?ëŠ” í•­ìƒ ì†ì„±ëª… ë˜ëŠ” ë§¤ê°œë³€ìˆ˜ ì´ë¦„ ë’¤ì— ë¶™ì…ë‹ˆë‹¤.
- ì¡´ì¬í•´ë„ ë˜ê³ , ì—†ì–´ë„ ë˜ëŠ” ê°’ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

### âœ… í•¨ìˆ˜ ë§¤ê°œë³€ìˆ˜ì—ì„œ ì˜µì…”ë„ ì‚¬ìš©

```typescript
function abc(a: number, b?: number, c?: number) {}
abc(1); // ì „ë¶€ ê°€ëŠ¥í•˜ë‹¤
abc(1, 2); // ì „ë¶€ ê°€ëŠ¥í•˜ë‹¤
abc(1, 2, 3); // ì „ë¶€ ê°€ëŠ¥í•˜ë‹¤
```

â— ì£¼ì˜: ì˜µì…”ë„ ë§¤ê°œë³€ìˆ˜ëŠ” ë§ˆì§€ë§‰ì— ë°°ì¹˜í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

### âœ… ë‚˜ë¨¸ì§€ ë§¤ê°œë³€ìˆ˜(rest parameter)

```ts
// ì œí•œì—†ì´ ì…ë ¥ì„ ë°›ê³  ì‹¶ì€ ê²½ìš°
function abc(...args: number[]) {}
abc(1, 2, 3, 4);
```

### âœ… type aliasì—ì„œ ì˜µì…”ë„

```ts
// type aliasì—ì„œ ì˜µì…”ë„ ì‚¬ìš©
type User = {
	id: number;
	nickname?: string; // ìˆì–´ë„ ë˜ê³  ì—†ì–´ë„ ë¨
};

const u1: User = { id: 1 };
const u2: User = { id: 2, nickname: "sunbin" };
```

### âœ… interfaceì—ì„œ ì˜µì…”ë„

```ts
// interfaceì˜ ì˜µì…”ë„ ì‚¬ìš©

interface Product {
	name: string;
	price?: number;
}

const p1: Product = { name: "Book" };
const p2: Product = { name: "Bag", price: 50 };
```

âœ… í´ë˜ìŠ¤ì—ì„œ ì˜µì…”ë„ ì†ì„±

```ts
class Person {
	name: string;
	age?: number;

	constructor(name: string, age?: number) {
		this.name = name;
		if (age !== undefined) {
			this.age = age;
		}
	}
}

let obj: { a: string; b?: string } = { a: "hello", b: "world" };
obj = { a: "hello" }; // bê°€ ìˆì–´ë„ ê·¸ë§Œ ì—†ì–´ë„ ê·¸ë§Œ,
```

## ğŸ“Œ 2. ì œë„¤ë¦­ (Generic)

### âœ… ê°œë…

ì œë„¤ë¦­ì´ë€ íƒ€ì…ì„ ë§¤ê°œë³€ìˆ˜ì²˜ëŸ¼ ì „ë‹¬ë°›ì•„ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

### âœ… ì œë„ˆë¦­ì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ 

```typescript
function add(x: string | number, y: string | number): string | number {
	return x + y;
}

// íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” ëª¨ë“  ê²½ìš°ë¥¼ ë‹¤ ê³ ë ¤í•˜ê¸° ë•Œë¬¸ì— 2 * 2ì˜ ëª¨ë“  ìƒí™©ì„ ê³ ë ¤
// ê²°ê³¼ë¥¼ ì´ë ‡ê²Œ ë§Œë“¤ê²ƒìœ¼ë¡œ ìƒê° í•˜ê³  ë§Œë“¤ì—ˆì§€ë§Œ,
add(1, 2); // 3
add("1", "2"); //12

// ì´ëŸ° ëª¨ë“  ì¼€ì´ìŠ¤ë“¤ì— ëŒ€í•´ì„œë„ ê³ ë ¤í•˜ê¸° ë•Œë¬¸ì— ì˜¬ë°”ë¥¸ í•¨ìˆ˜ë¼ê³  ë³¼ ìˆ˜ ì—†ìŒ
add(1, "2"); //12
add("1", 2); //12
```

í•˜ë‚˜ì˜ í•¨ìˆ˜ ëª…ìœ¼ë¡œ ë‘ê°€ì§€ ê¸°ëŠ¥ì„ ë™ì‹œì— ì²˜ë¦¬í•˜ë„ë¡ í•˜ê³  ì‹¶ì§€ë§Œ, ë‹¤ìŒê³¼ ê°™ì€ ë°©ë²•ìœ¼ë¡œëŠ” ì²˜ë¦¬ í•  ìˆ˜ ì—†ìŒ

```ts
// ë™ì¼í•œ ê°¯ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ëŠ” ì˜¤ë²„ ë¡œë”© ë¶ˆê°€ëŠ¥
function add(x: string, y: string): string;
function add(x: number, y: number): number;
```

### âœ… ê¸°ë³¸ ì˜ˆì‹œ

```ts
// ì œë„ˆë¦­
// ë™ì¼ íƒ€ì…ì„ ì‚¬ìš©í•˜ê³ ,
// Të¼ê³  í‘œê¸°í•´ ë‘ì—ˆì§€ë§Œ, ì–´ë–¤ ë¬¸ìë¡œë“  ë‹¤ ê¸°ì… ê°€ëŠ¥í•˜ë‹¤.
function add<T>(x: T, y: T): T {
	return x + y;
}

// ì œë„ˆë¦­ì€ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í• ë•Œ íƒ€ì…ì´ ì •í•´ì§ˆ ìˆ˜ ìˆê²Œ ì‚¬ìš©í•œë‹¤.
add(1, 2);
add("1", "2");
add<number>(1, 2);
add<string>("1", "2");

// ì—¬ì „íˆ ì˜¤ë¥˜
// add(1, "2") // âŒ íƒ€ì… ë¶ˆì¼ì¹˜ ì—ëŸ¬
```

### âœ… íƒ€ì… ì œí•œ (extends)

```ts
// ë²”ìœ„ê°€ ë„ˆë¬´ ë„“ë‹¤ê³  íŒë‹¨ë  ê²½ìš°, Tì— ì œí•œì„ ë‘˜ìˆ˜ ìˆë‹¤.
function add<T extends string>(x: T, y: T): T {
	return x + y;
}

// ë§¤ê°œë³€ìˆ˜ ë§Œì€ ê°™ì€ íƒ€ì…ì´ ë“¤ì–´ê°ˆ ìˆ˜ ìˆë„ë¡ í•  ìˆ˜ ìˆë‹¤.
function add<T extends string | number>(x: T, y: T): T {
	return x + y;
}

// ì—¬ëŸ¬ ê°œì˜ ì œë„ˆë¦­ë„ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.
function add<T extends string | number, K extends string>(x: T, y: T): T {
	return x + y;
}
```

### âœ… ì œë„¤ë¦­ ì„ ì–¸ ìœ„ì¹˜ ê¸°ì–µí•˜ê¸°

```typescript
function a<T>() {}
class B<T>() {}
interface C<T> {}
type D<T> = {};
const e = <T>() => {};
```

## ğŸ“Œ 3. ì œë„¤ë¦­ ë‹¤ì–‘í•œ í™œìš© ì˜ˆì‹œ

### âœ… 1 - ê°ì²´ íƒ€ì… ì œì•½

```ts
// íŠ¹ì • ê°ì²´
// <T extends {...}>

function printA<T extends { a: string }>(obj: T): void {
	// âœ… TypeScript only: obj must have string `a`
	console.log(obj.a);
}

printA({ a: "hello" }); // âœ… OK
printA({ a: "world", extra: 123 }); // âœ… OK
// printA({ b: "oops" });              // âŒ TS error: aê°€ ì—†ìŒ
```

### âœ… 2 - ë°°ì—´ íƒ€ì… ì œì•½

```ts
// ëª¨ë“  ë°°ì—´
// <T extends any[]>
function getList<T extends string[]>(x: T): T {
	return x;
}
getList(["1", "2", "3"]);

function getFirst<T extends any[]>(arr: T): T[number] {
	// âœ… TypeScript only: ë°°ì—´ì˜ ìš”ì†Œ íƒ€ì…ì„ ìë™ ì¶”ë¡ í•¨
	return arr[0];
}

const x = getFirst(["a", "b"]); // string ì¶”ë¡ ë¨
const y = getFirst([1, 2, 3]); // number ì¶”ë¡ ë¨
```

### âœ… 3 - í•¨ìˆ˜ íƒ€ì… ì œì•½

```ts
// í•¨ìˆ˜ íƒ€ì…
// <T extends (...args: any) => any> // ëª¨ë“  í•¨ìˆ˜
// (...args: any) => any ëª¨ë“  í•¨ìˆ˜ ì…ë ¥ (anyë¥¼ ì¨ë„ ë˜ëŠ” ìœ ì¼í•œ ì˜ˆì™¸)
// ì…ë ¥ë°›ëŠ” ì½œë°± í•¨ìˆ˜ì˜ í˜•íƒœë¥¼ ì§€ì •í•œë‹¤.
function add<T extends (a: string) => number>(x: T): T {
	return x;
}

function useCallback<T extends (...args: any[]) => any>(fn: T): void {
	// âœ… TypeScript only: fnì€ í•¨ìˆ˜ íƒ€ì…ì´ì–´ì•¼ í•¨
	fn(); // args ì—†ìœ¼ë©´ undefinedë¡œ í˜¸ì¶œë¨
}

useCallback(() => console.log("hello")); // OK

// ì…ë ¥ í˜•íƒœ ê³ ì •
function runCallback<T extends (msg: string) => void>(fn: T): void {
	fn("TypeScript");
}

runCallback((text) => console.log(text.length)); // OK
```

### âœ… 4 - ìƒì„±ì íƒ€ì… ì œì•½

```ts
// ìƒì„±ì íƒ€ì…
// <T extends abstract new (...args: any) => any>

function add<T extends abstract new (...args: any) => any>(x: T): T {
	return x;
}

// í´ë˜ìŠ¤ ìì²´ë¥¼ ë„£ê³  ì‹¶ì„ë•Œ
class A {}
add(A);
add(new A()); // ì˜¤ë¥˜

function create<T extends abstract new (...args: any[]) => any>(Ctor: T): InstanceType<T> {
	// âœ… TypeScript only: ìƒì„±ìë¡œë§Œ í˜¸ì¶œ ê°€ëŠ¥
	return new Ctor();
}

class MyClass {
	msg = "hi";
}

const obj = create(MyClass);
console.log(obj.msg); // "hi"
```

### âœ… 5 - í‚¤ íƒ€ì… ì œí•œ (keyof any)

```ts
// <T extends keyof any> // string | number | symbol
// ëª¨ë“  í‚¤ë“¤ì„ ë°›ê³  ì‹¶ì„ë•Œ

function logKey<T extends keyof any>(key: T) {
	// âœ… TypeScript only: í‚¤ íƒ€ì…ë§Œ í—ˆìš© (string | number | symbol)
	console.log(`Key is: ${String(key)}`);
}

logKey("name"); // âœ… OK
logKey(42); // âœ… OK
logKey(Symbol("id")); // âœ… OK
```

### ğŸŸ¦ Symbolì´ë€?

Symbolì€ ê³ ìœ í•˜ê³  ì¶©ëŒí•˜ì§€ ì•ŠëŠ” ì‹ë³„ìë¥¼ ë§Œë“¤ê¸° ìœ„í•œ ì›ì‹œ íƒ€ì…(primitive type)

Symbolì€ í‚¤ ì´ë¦„ ì¶©ëŒì„ ë°©ì§€í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, ë¼ì´ë¸ŒëŸ¬ë¦¬ ë‚´ë¶€ë‚˜ ë©”íƒ€ë°ì´í„° ë“±ì— ìì£¼ ì‚¬ìš©ë©ë‹ˆë‹¤.

```ts
const sym1 = Symbol("id");
const sym2 = Symbol("id");

console.log(sym1 === sym2); // false â— ì„œë¡œ ë‹¤ë¦„

// ì‚¬ìš©ì˜ˆì œ
// ê°ì²´ í‚¤ë¡œ ì‚¬ìš©:
const id = Symbol("id");

const user = {
	name: "sunbin",
	[id]: 12345
};

console.log(user[id]); // 12345
```
